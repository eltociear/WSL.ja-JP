---
title: WSL 2 について
description: WSL 2 について Windows Subsystem for Linux の新しいアーキテクチャ
keywords: BashOnWindows, bash, wsl, wsl2, windows, windows subsystem for linux, windowssubsystem, ubuntu, debian, suse, windows 10, インストール
ms.date: 05/30/2019
ms.topic: article
ms.assetid: 7afaeacf-435a-4e58-bff0-a9f0d75b8a51
ms.custom: seodec18
ms.openlocfilehash: 7122fcbd73e064871eba2ac80c727178aaf3ca7b
ms.sourcegitcommit: 5c92b820f84de57a04ab11faf4dd0d24fff6b320
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/18/2019
ms.locfileid: "74161474"
---
# <a name="about-wsl-2"></a><span data-ttu-id="15e42-104">WSL 2 について</span><span class="sxs-lookup"><span data-stu-id="15e42-104">About WSL 2</span></span>

<span data-ttu-id="15e42-105">WSL 2 は、windows Subsystem for Linux が Windows 上で ELF64 Linux バイナリを実行できるようにする、アーキテクチャの新しいバージョンです。</span><span class="sxs-lookup"><span data-stu-id="15e42-105">WSL 2 is a new version of the architecture that powers the Windows Subsystem for Linux to run ELF64 Linux binaries on Windows.</span></span> <span data-ttu-id="15e42-106">主な目的は、ファイルシステムのパフォーマンスを向上させたり、システムコールの完全な互換性を追加したりすることです。</span><span class="sxs-lookup"><span data-stu-id="15e42-106">Its primary goals are to increase file system performance, as well as adding full system call compatibility.</span></span> <span data-ttu-id="15e42-107">この新しいアーキテクチャは、これらの Linux バイナリが Windows とコンピューターのハードウェアとどのように対話するかを変更しますが、WSL 1 (現在幅広く使用可能なバージョン) と同じユーザーエクスペリエンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="15e42-107">This new architecture changes how these Linux binaries interact with Windows and your computer’s hardware, but still provides the same user experience as in WSL 1 (the current widely available version).</span></span> <span data-ttu-id="15e42-108">個々の Linux ディストリビューションは WSL 1 ディストリビューションとして実行するか、WSL 2 ディストリビューションとして実行できます。また、いつでもアップグレードまたはダウングレードできます。 WSL 1 と WSL 2 ディストリビューションを並行して実行できます。</span><span class="sxs-lookup"><span data-stu-id="15e42-108">Individual Linux distros can be run either as a WSL 1 distro, or as a WSL 2 distro, can be upgraded or downgraded at any time, and you can run WSL 1 and WSL 2 distros side by side.</span></span> <span data-ttu-id="15e42-109">WSL 2 は、実際の Linux カーネルを使用するまったく新しいアーキテクチャを使用します。</span><span class="sxs-lookup"><span data-stu-id="15e42-109">WSL 2 uses an entirely new architecture that uses a real Linux kernel.</span></span>

## <a name="linux-kernel-in-wsl-2"></a><span data-ttu-id="15e42-110">WSL 2 の Linux カーネル</span><span class="sxs-lookup"><span data-stu-id="15e42-110">Linux kernel in WSL 2</span></span>

<span data-ttu-id="15e42-111">WSL 2 の Linux カーネルは、kernel.org で入手できるソースに基づいて、最新の安定したブランチから社内に構築されています。このカーネルは WSL 2 用に特別に調整されています。</span><span class="sxs-lookup"><span data-stu-id="15e42-111">The Linux kernel in WSL 2 is built in house from the latest stable branch, based on the source available at kernel.org. This kernel has been specially tuned for WSL 2.</span></span> <span data-ttu-id="15e42-112">サイズとパフォーマンスのために最適化されており、Windows での優れた Linux エクスペリエンスを提供し、Windows の更新プログラムによってサービスを提供します。つまり、自分で管理することなく、最新のセキュリティ修正とカーネルの改善を受けることができます。</span><span class="sxs-lookup"><span data-stu-id="15e42-112">It has been optimized for size and performance to give an amazing Linux experience on Windows and will be serviced through Windows updates, which means you will get the latest security fixes and kernel improvements without needing to manage it yourself.</span></span>

<span data-ttu-id="15e42-113">さらに、このカーネルはオープンソースになります。</span><span class="sxs-lookup"><span data-stu-id="15e42-113">Additionally this kernel will be open source.</span></span> <span data-ttu-id="15e42-114">Linux カーネルの完全なソースコードについては、[こちら](https://github.com/microsoft/WSL2-Linux-Kernel)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="15e42-114">You can find the full source code for the Linux kernel [here](https://github.com/microsoft/WSL2-Linux-Kernel).</span></span> <span data-ttu-id="15e42-115">このカーネルの詳細については、このカーネルを構築したチームによって記述された[このブログ記事](https://devblogs.microsoft.com/commandline/shipping-a-linux-kernel-with-windows/)をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="15e42-115">If you’d like to read more about this kernel you can check out [this blog post](https://devblogs.microsoft.com/commandline/shipping-a-linux-kernel-with-windows/) written by the team that built it.</span></span>

## <a name="brief-overview-of-the-wsl-2-architecture"></a><span data-ttu-id="15e42-116">WSL 2 アーキテクチャの概要</span><span class="sxs-lookup"><span data-stu-id="15e42-116">Brief overview of the WSL 2 architecture</span></span>

<span data-ttu-id="15e42-117">WSL 2 では、仮想化テクノロジの最新で最高のものを使用して、ライトウェイトユーティリティ仮想マシン (VM) 内で Linux カーネルを実行します。</span><span class="sxs-lookup"><span data-stu-id="15e42-117">WSL 2 uses the latest and greatest in virtualization technology to run its Linux kernel inside of a lightweight utility virtual machine (VM).</span></span> <span data-ttu-id="15e42-118">ただし、WSL 2 は従来の VM エクスペリエンスではありません。</span><span class="sxs-lookup"><span data-stu-id="15e42-118">However, WSL 2 will NOT be a traditional VM experience.</span></span> <span data-ttu-id="15e42-119">従来の VM エクスペリエンスは起動に時間がかかり、分離され、大量のリソースを消費するため、管理に時間がかかることがあります。</span><span class="sxs-lookup"><span data-stu-id="15e42-119">A traditional VM experience can be slow to boot up, is isolated, consumes lots of resources, and requires your time to manage it.</span></span> <span data-ttu-id="15e42-120">WSL 2 には、これらの属性はありません。</span><span class="sxs-lookup"><span data-stu-id="15e42-120">WSL 2 does not have these attributes.</span></span> <span data-ttu-id="15e42-121">WSL 1 の大きなメリットが得られます。 Windows と Linux 間の高レベルの統合、非常に高速な起動時間、小規模なリソースのフットプリント、すべての利点は VM の構成や管理を必要としないことです。</span><span class="sxs-lookup"><span data-stu-id="15e42-121">It will still give the remarkable benefits of WSL 1: High levels of integration between Windows and Linux, extremely fast boot times, small resource footprint, and best of all will require no VM configuration or management.</span></span> <span data-ttu-id="15e42-122">WSL 2 では VM を使用しますが、WSL 1 と同じユーザーエクスペリエンスが得られるように、管理され、バックグラウンドで実行されます。</span><span class="sxs-lookup"><span data-stu-id="15e42-122">While WSL 2 does use a VM, it will be managed and run behind the scenes leaving you with the same user experience as WSL 1.</span></span>

## <a name="increased-file-io-performance"></a><span data-ttu-id="15e42-123">ファイル IO パフォーマンスの向上</span><span class="sxs-lookup"><span data-stu-id="15e42-123">Increased file IO performance</span></span>

<span data-ttu-id="15e42-124">`git clone`、`npm install`、`apt update`、`apt upgrade`などのファイル集中型の操作はすべて、非常に高速になります。</span><span class="sxs-lookup"><span data-stu-id="15e42-124">File intensive operations like `git clone`, `npm install`, `apt update`, `apt upgrade`, and more will all be noticeably faster.</span></span> <span data-ttu-id="15e42-125">実際の速度の増加は、実行しているアプリとファイルシステムとの対話方法によって異なります。</span><span class="sxs-lookup"><span data-stu-id="15e42-125">The actual speed increase will depend on which app you’re running and how it is interacting with the file system.</span></span> <span data-ttu-id="15e42-126">最初のバージョンの WSL 2 は、zip 圧縮された tar を開梱する場合は WSL 1 を20倍、さまざまなプロジェクトでは `npm install` と `cmake` `git clone`を使用する場合は約2倍高速に実行されます。</span><span class="sxs-lookup"><span data-stu-id="15e42-126">Initial versions of WSL 2 run up to 20x faster compared to WSL 1 when unpacking a zipped tarball, and around 2-5x faster when using `git clone`, `npm install` and `cmake` on various projects.</span></span>

## <a name="full-system-call-compatibility"></a><span data-ttu-id="15e42-127">システムコールの完全な互換性</span><span class="sxs-lookup"><span data-stu-id="15e42-127">Full System Call Compatibility</span></span>

<span data-ttu-id="15e42-128">Linux バイナリでは、システム呼び出しを使用して、ファイルへのアクセス、メモリの要求、プロセスの作成など、さまざまな機能を実行します。</span><span class="sxs-lookup"><span data-stu-id="15e42-128">Linux binaries use system calls to perform many functions such as accessing files, requesting memory, creating processes, and more.</span></span> <span data-ttu-id="15e42-129">Wsl 1 では、WSL チームによって作成された翻訳レイヤーが使用されていましたが、WSL 2 には、システムコールの完全な互換性を備えた独自の Linux カーネルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="15e42-129">Whereas WSL 1 used a translation layer that was built by the WSL team, WSL 2 includes its own Linux kernel with full system call compatibility.</span></span> <span data-ttu-id="15e42-130">これにより、Docker などの WSL 内で実行できるアプリの完全なセットが導入されます。</span><span class="sxs-lookup"><span data-stu-id="15e42-130">This introduces a whole new set of apps that you can run inside of WSL, such as Docker and more.</span></span> <span data-ttu-id="15e42-131">また、Linux カーネルに対する更新は、WSL チームが変更を実装して追加するのを待機するのではなく、すぐにコンピューターに追加することができます。</span><span class="sxs-lookup"><span data-stu-id="15e42-131">Additionally, any updates to the Linux kernel can be immediately ready to be added to your computer, rather than waiting for the WSL team to implement the changes and then have them added.</span></span>