---
title: WSL 2 について
description: WSL 2 Windows Subsystem for Linux の新しいアーキテクチャについて
keywords: BashOnWindows、bash、wsl、wsl2、windows、linux、windowssubsystem、ubuntu、debian、suse、windows 10 用 windows サブシステムのインストールします。
author: mscraigloewen
ms.author: mscraigloewen
ms.date: 05/30/2019
ms.topic: article
ms.assetid: 7afaeacf-435a-4e58-bff0-a9f0d75b8a51
ms.custom: seodec18
ms.openlocfilehash: b3b0b1ce0f55fed0b4cf223ccc18a509dcf81788
ms.sourcegitcommit: bb88269eb37405192625fa81ff91162393fb491f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/12/2019
ms.locfileid: "67038132"
---
<span data-ttu-id="6734f-104">WSL 2 では、新しいバージョンの Windows で ELF64 Linux バイナリを実行する Linux 用 Windows サブシステムが作動するアーキテクチャです。</span><span class="sxs-lookup"><span data-stu-id="6734f-104">WSL 2 is a new version of the architecture that powers the Windows Subsystem for Linux to run ELF64 Linux binaries on Windows.</span></span> <span data-ttu-id="6734f-105">その主な目標は、完全なシステムの呼び出しの互換性を追加するとともに、ファイル システムのパフォーマンスを向上させる。</span><span class="sxs-lookup"><span data-stu-id="6734f-105">Its primary goals are to increase file system performance, as well as adding full system call compatibility.</span></span> <span data-ttu-id="6734f-106">この新しいアーキテクチャでは、これらの Linux バイナリが Windows およびコンピューターのハードウェアとやり取りする方法の変更が、WSL 1 (現在広く普及しているのバージョン) のように、同じユーザー エクスペリエンスが提供されます。</span><span class="sxs-lookup"><span data-stu-id="6734f-106">This new architecture changes how these Linux binaries interact with Windows and your computer’s hardware, but still provides the same user experience as in WSL 1 (the current widely available version).</span></span> <span data-ttu-id="6734f-107">WSL 1 ディストリビューションの場合、または、WSL 2 ディストリビューションでは、ディストリビューションを実行できる個々 の Linux のアップグレードや、いつでもダウン グレードが可能し、サイド バイ サイドの WSL 1 と WSL 2 ディストリビューションを実行することができます。</span><span class="sxs-lookup"><span data-stu-id="6734f-107">Individual Linux distros can be run either as a WSL 1 distro, or as a WSL 2 distro, can be upgraded or downgraded at any time, and you can run WSL 1 and WSL 2 distros side by side.</span></span> <span data-ttu-id="6734f-108">WSL 2 では、実際の Linux カーネルを使用する、まったく新しいアーキテクチャを使用します。</span><span class="sxs-lookup"><span data-stu-id="6734f-108">WSL 2 uses an entirely new architecture that uses a real Linux kernel.</span></span>

## <a name="linux-kernel-in-wsl-2"></a><span data-ttu-id="6734f-109">WSL 2 での Linux カーネル</span><span class="sxs-lookup"><span data-stu-id="6734f-109">Linux kernel in WSL 2</span></span>

<span data-ttu-id="6734f-110">WSL 2 での Linux カーネルは kernel.org で使用可能なソースに基づいた最新の安定したブランチから、社内で構築されています。このカーネルは WSL 2 特別に調整されています。</span><span class="sxs-lookup"><span data-stu-id="6734f-110">The Linux kernel in WSL 2 is built in house from the latest stable branch, based on the source available at kernel.org. This kernel has been specially tuned for WSL 2.</span></span> <span data-ttu-id="6734f-111">サイズとパフォーマンスを Windows を驚くほどの Linux のエクスペリエンスを提供するために最適化された、Windows 更新プログラムが処理されますので、自分で管理することがなく、最新のセキュリティ修正プログラムとカーネル機能強化が表示されます。</span><span class="sxs-lookup"><span data-stu-id="6734f-111">It has been optimized for size and performance to give an amazing Linux experience on Windows and will be serviced through Windows updates, which means you will get the latest security fixes and kernel improvements without needing to manage it yourself.</span></span>

<span data-ttu-id="6734f-112">さらにこのカーネルは、オープン ソースになります。</span><span class="sxs-lookup"><span data-stu-id="6734f-112">Additionally this kernel will be open source.</span></span> <span data-ttu-id="6734f-113">完全なソース コードを検索するには、Linux カーネルの[ここ](https://thirdpartysource.microsoft.com/download/Windows%20Subsystem%20for%20Linux%20v2/May%202019/WSLv2-Linux-Kernel-master.zip)します。</span><span class="sxs-lookup"><span data-stu-id="6734f-113">You can find the full source code for the Linux kernel [here](https://thirdpartysource.microsoft.com/download/Windows%20Subsystem%20for%20Linux%20v2/May%202019/WSLv2-Linux-Kernel-master.zip).</span></span> <span data-ttu-id="6734f-114">詳細したい場合については、このカーネルをチェック アウトできます[このブログの投稿](https://devblogs.microsoft.com/commandline/shipping-a-linux-kernel-with-windows/)のビルド チームによって書き込まれました。</span><span class="sxs-lookup"><span data-stu-id="6734f-114">If you’d like to read more about this kernel you can check out [this blog post](https://devblogs.microsoft.com/commandline/shipping-a-linux-kernel-with-windows/) written by the team that built it.</span></span>

## <a name="brief-overview-of-the-wsl-2-architecture"></a><span data-ttu-id="6734f-115">WSL 2 アーキテクチャの概要</span><span class="sxs-lookup"><span data-stu-id="6734f-115">Brief overview of the WSL 2 architecture</span></span>

<span data-ttu-id="6734f-116">WSL 2 は、軽量なユーティリティ仮想マシン (VM) 内での Linux カーネルを実行するのに、最新かつ最高の仮想化テクノロジを使用します。</span><span class="sxs-lookup"><span data-stu-id="6734f-116">WSL 2 uses the latest and greatest in virtualization technology to run its Linux kernel inside of a lightweight utility virtual machine (VM).</span></span> <span data-ttu-id="6734f-117">ただし、WSL 2 には、従来の VM エクスペリエンスはできません。</span><span class="sxs-lookup"><span data-stu-id="6734f-117">However, WSL 2 will NOT be a traditional VM experience.</span></span> <span data-ttu-id="6734f-118">従来の VM のエクスペリエンスは、起動に時間がかかることができます、分離された、多数のリソースを消費、および、時間を管理する必要がありますを。</span><span class="sxs-lookup"><span data-stu-id="6734f-118">A traditional VM experience can be slow to boot up, is isolated, consumes lots of resources, and requires your time to manage it.</span></span> <span data-ttu-id="6734f-119">WSL 2 には、これらの属性はありません。</span><span class="sxs-lookup"><span data-stu-id="6734f-119">WSL 2 does not have these attributes.</span></span> <span data-ttu-id="6734f-120">まだ WSL 1 の非常に大きなメリットが得られます。VM の構成または管理、高レベルの Windows と Linux、非常に高速起動時間、小規模リソースのフット プリント、およびすべての間の統合は必要ありません。</span><span class="sxs-lookup"><span data-stu-id="6734f-120">It will still give the remarkable benefits of WSL 1: High levels of integration between Windows and Linux, extremely fast boot times, small resource footprint, and best of all will require no VM configuration or management.</span></span> <span data-ttu-id="6734f-121">WSL 2 は、VM を使用して、これは、管理され WSL 1 と同じユーザー エクスペリエンスを終了するシーンの背後で実行されます。</span><span class="sxs-lookup"><span data-stu-id="6734f-121">While WSL 2 does use a VM, it will be managed and run behind the scenes leaving you with the same user experience as WSL 1.</span></span>

## <a name="increased-file-io-performance"></a><span data-ttu-id="6734f-122">ファイル IO パフォーマンスを向上</span><span class="sxs-lookup"><span data-stu-id="6734f-122">Increased file IO performance</span></span>

<span data-ttu-id="6734f-123">ファイルの処理を要する操作などの git クローン、npm のインストール、apt 更新プログラム、apt アップグレード、およびすべて非常に高速です。</span><span class="sxs-lookup"><span data-stu-id="6734f-123">File intensive operations like git clone, npm install, apt update, apt upgrade, and more will all be noticeably faster.</span></span> <span data-ttu-id="6734f-124">どのアプリでは、実行して、ファイル システムとの対話方法をしている実際の速度の増加によって異なります。</span><span class="sxs-lookup"><span data-stu-id="6734f-124">The actual speed increase will depend on which app you’re running and how it is interacting with the file system.</span></span> <span data-ttu-id="6734f-125">WSL 2 の最初のバージョンの実行に最大 20 倍の速さの周りを zip 形式の tarball をアンパックし、WSL 1 と比べて 2 ~ 5 倍高速化するさまざまなプロジェクトで git クローン、npm のインストールおよび cmake を使用します。</span><span class="sxs-lookup"><span data-stu-id="6734f-125">Initial versions of WSL 2 run up to 20x faster compared to WSL 1 when unpacking a zipped tarball, and around 2-5x faster when using git clone, npm install and cmake on various projects.</span></span>

## <a name="full-system-call-compatibility"></a><span data-ttu-id="6734f-126">完全なシステムの呼び出しの互換性</span><span class="sxs-lookup"><span data-stu-id="6734f-126">Full System Call Compatibility</span></span>

<span data-ttu-id="6734f-127">Linux のバイナリは、ファイルへのアクセス、メモリを要求して、プロセス、および詳細の作成などの多くの機能を実行するのにシステム コールを使用します。</span><span class="sxs-lookup"><span data-stu-id="6734f-127">Linux binaries use system calls to perform many functions such as accessing files, requesting memory, creating processes, and more.</span></span> <span data-ttu-id="6734f-128">WSL 1 の WSL チームによって構築された変換レイヤーに対して、WSL 2 には、完全なシステムの呼び出しの互換性の独自の Linux カーネルが含まれます。</span><span class="sxs-lookup"><span data-stu-id="6734f-128">Whereas WSL 1 used a translation layer that was built by the WSL team, WSL 2 includes its own Linux kernel with full system call compatibility.</span></span> <span data-ttu-id="6734f-129">これには、Docker などの WSL 内で実行できるアプリのまったく新しいセットが導入されています。</span><span class="sxs-lookup"><span data-stu-id="6734f-129">This introduces a whole new set of apps that you can run inside of WSL, such as Docker and more.</span></span> <span data-ttu-id="6734f-130">さらに、それらを追加、変更を実装し、WSL チームを待つのではなく、Linux カーネルに更新プログラムをすぐに、コンピューターに追加することができます。</span><span class="sxs-lookup"><span data-stu-id="6734f-130">Additionally, any updates to the Linux kernel can be immediately ready to be added to your computer, rather than waiting for the WSL team to implement the changes and then have them added.</span></span>