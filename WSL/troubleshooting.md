---
title: Linux 用の Windows Susbystem のトラブルシューティング
description: 一般的なエラーの詳細について説明し、ユーザーに実行を発行 Linux 用 Windows Susbystem で Linux を実行中にします。
keywords: BashOnWindows、bash、wsl、windows、windowssubsystem、ubuntu
author: scooley
ms.author: scooley
ms.date: 11/15/2017
ms.topic: article
ms.assetid: 6753f1b2-200e-49cc-93a5-4323e1117246
ms.custom: seodec18
ms.openlocfilehash: 055bdc02dcf8f078caa014abd6dd755a47c99cfe
ms.sourcegitcommit: ae0956bc0543b1c45765f3620ce9a55c9afe55da
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/18/2019
ms.locfileid: "59063300"
---
# <a name="troubleshooting-windows-subsystem-for-linux"></a><span data-ttu-id="47aa2-104">トラブルシューティングの Windows Subsystem for Linux</span><span class="sxs-lookup"><span data-stu-id="47aa2-104">Troubleshooting Windows Subsystem for Linux</span></span>

### <a name="bash-loses-network-connectivity-once-connected-to-a-vpn"></a><span data-ttu-id="47aa2-105">Bash の VPN に接続すれば、ネットワーク接続を失った</span><span class="sxs-lookup"><span data-stu-id="47aa2-105">Bash loses network connectivity once connected to a VPN</span></span>

<span data-ttu-id="47aa2-106">Windows 上の VPN に接続したら、bash にネットワーク接続が切断されると、bash 内からこの回避策をお試しください。</span><span class="sxs-lookup"><span data-stu-id="47aa2-106">If after connecting to a VPN on Windows, bash loses network connectivity, try this workaround from within bash.</span></span> <span data-ttu-id="47aa2-107">この回避策で DNS 解決を手動でオーバーライドすることが`/etc/resolv.conf`します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-107">This workaround will allow you to manually override the DNS resolution through `/etc/resolv.conf`.</span></span>

1. <span data-ttu-id="47aa2-108">これから VPN の DNS サーバーのメモします。 `ipconfig.exe /all`</span><span class="sxs-lookup"><span data-stu-id="47aa2-108">Take a note of the DNS server of the VPN from doing `ipconfig.exe /all`</span></span>
2. <span data-ttu-id="47aa2-109">Resolv.conf を既存のコピーを作成します。 `sudo cp /etc/resolv.conf /etc/resolv.conf.new`</span><span class="sxs-lookup"><span data-stu-id="47aa2-109">Make a copy of the existing resolv.conf `sudo cp /etc/resolv.conf /etc/resolv.conf.new`</span></span>
3. <span data-ttu-id="47aa2-110">現在の resolv.con のリンクを解除します。 `sudo unlink /etc/resolv.conf`</span><span class="sxs-lookup"><span data-stu-id="47aa2-110">Unlink the current resolv.con `sudo unlink /etc/resolv.conf`</span></span>
4. `sudo mv /etc/resolv.conf.new /etc/resolv.conf`
5. <span data-ttu-id="47aa2-111">開いている`/etc/resolv.conf`と</span><span class="sxs-lookup"><span data-stu-id="47aa2-111">Open `/etc/resolv.conf` and</span></span> <br/>
   <span data-ttu-id="47aa2-112">a. </span><span class="sxs-lookup"><span data-stu-id="47aa2-112">a.</span></span> <span data-ttu-id="47aa2-113">というファイルから最初の行を削除"\# WSL でのこのファイルを自動的に生成されました。</span><span class="sxs-lookup"><span data-stu-id="47aa2-113">Delete the first line from the file, which says "\# This file was automatically generated by WSL.</span></span> <span data-ttu-id="47aa2-114">このファイルの自動生成を停止するには、この行を削除します。"です。</span><span class="sxs-lookup"><span data-stu-id="47aa2-114">To stop automatic generation of this file, remove this line.".</span></span> <br/>
   <span data-ttu-id="47aa2-115">b. </span><span class="sxs-lookup"><span data-stu-id="47aa2-115">b.</span></span> <span data-ttu-id="47aa2-116">DNS サーバーの一覧で最初のエントリとして (1) から上の DNS エントリを追加します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-116">Add the DNS entry from (1) above as the very first entry in the list of DNS servers.</span></span> <br/>
   <span data-ttu-id="47aa2-117">c.</span><span class="sxs-lookup"><span data-stu-id="47aa2-117">c.</span></span> <span data-ttu-id="47aa2-118">ファイルを閉じます。</span><span class="sxs-lookup"><span data-stu-id="47aa2-118">Close the file.</span></span> <br/>

<span data-ttu-id="47aa2-119">変更を元に戻す必要があります、VPN を切断すると、`/etc/resolv.conf`します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-119">Once you have disconnected the VPN, you will have to revert the changes to `/etc/resolv.conf`.</span></span> <span data-ttu-id="47aa2-120">これを行うには、次の操作を行います。</span><span class="sxs-lookup"><span data-stu-id="47aa2-120">To do this, do:</span></span>
1. `cd /etc`
2. `sudo mv resolv.conf resolv.conf.new`
3. `sudo ln -s ../run/resolvconf/resolv.conf resolv.conf`

### <a name="starting-wsl-or-installing-a-distribution-returns-an-error-code"></a><span data-ttu-id="47aa2-121">WSL を開始またはディストリビューションのインストールは、エラー コードを返します</span><span class="sxs-lookup"><span data-stu-id="47aa2-121">Starting WSL or installing a distribution returns an error code</span></span>

<span data-ttu-id="47aa2-122">次の[手順](https://github.com/Microsoft/WSL/blob/master/CONTRIBUTING.md#8-detailed-logs)の詳細なログを収集し、GitHub で問題を報告します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-122">Follow [these instructions](https://github.com/Microsoft/WSL/blob/master/CONTRIBUTING.md#8-detailed-logs) to collect detailed logs and file an issue on our GitHub.</span></span>

### <a name="updating-bash-on-ubuntu-on-windows"></a><span data-ttu-id="47aa2-123">Bash on Ubuntu on Windows を更新しています</span><span class="sxs-lookup"><span data-stu-id="47aa2-123">Updating Bash on Ubuntu on Windows</span></span>

<span data-ttu-id="47aa2-124">Bash on Ubuntu on Windows の更新が必要になるの 2 つのコンポーネントがあります。</span><span class="sxs-lookup"><span data-stu-id="47aa2-124">There are two components of Bash on Ubuntu on Windows that can require updating.</span></span> 

1. <span data-ttu-id="47aa2-125">Windows Subsystem for Linux</span><span class="sxs-lookup"><span data-stu-id="47aa2-125">The Windows Subsystem for Linux</span></span>
  
   <span data-ttu-id="47aa2-126">Bash on Ubuntu on Windows のこの部分をアップグレードするで、新しい修正アウトラインが有効になります、[リリース ノート](https://msdn.microsoft.com/en-us/commandline/wsl/release_notes)します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-126">Upgrading this portion of Bash on Ubuntu on Windows will enable any new fixes outlines in the [release notes](https://msdn.microsoft.com/en-us/commandline/wsl/release_notes).</span></span> <span data-ttu-id="47aa2-127">Windows Insider Program にサブスクライブしていることと、ビルドが最新であることを確認します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-127">Ensure that you are subscribed to the Windows Insider Program and that your build is up to date.</span></span> <span data-ttu-id="47aa2-128">きめ細かいコントロール、Ubuntu のリセットを含むインスタンスのチェック アウト、[コマンド リファレンスのページ](https://msdn.microsoft.com/en-us/commandline/wsl/reference)します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-128">For finer grain control including resetting your Ubuntu instance check out the [command reference page](https://msdn.microsoft.com/en-us/commandline/wsl/reference).</span></span>

2. <span data-ttu-id="47aa2-129">Ubuntu のユーザーのバイナリ</span><span class="sxs-lookup"><span data-stu-id="47aa2-129">The Ubuntu user binaries</span></span> 

   <span data-ttu-id="47aa2-130">Bash on Ubuntu on Windows のこの部分をアップグレードすると、apt get を使用してインストールされているアプリケーションを含む Ubuntu ユーザー バイナリにすべての更新プログラムがインストールされます。</span><span class="sxs-lookup"><span data-stu-id="47aa2-130">Upgrading this portion of Bash on Ubuntu on Windows will install any updates to the Ubuntu user binaries including applications that you have installed via apt-get.</span></span> <span data-ttu-id="47aa2-131">Bash で、次のコマンドの実行を更新します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-131">To update run the following commands in Bash:</span></span>
  
   1. `apt-get update`
   2. `apt-get upgrade`
  
### <a name="apt-get-upgrade-errors"></a><span data-ttu-id="47aa2-132">Apt get アップグレード エラー</span><span class="sxs-lookup"><span data-stu-id="47aa2-132">Apt-get upgrade errors</span></span>
<span data-ttu-id="47aa2-133">一部のパッケージはまだ実装されていない機能を使用します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-133">Some packages use features that we haven't implemented yet.</span></span> <span data-ttu-id="47aa2-134">`udev`、たとえば、はまだサポートされていません、いくつかの原因`apt-get upgrade`エラー。</span><span class="sxs-lookup"><span data-stu-id="47aa2-134">`udev`, for example, isn't supported yet and causes several `apt-get upgrade` errors.</span></span>

<span data-ttu-id="47aa2-135">関連する問題を修正する`udev`、次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="47aa2-135">To fix issues related to `udev`, follow the following steps:</span></span>

1. <span data-ttu-id="47aa2-136">次のコードを記述`/usr/sbin/policy-rc.d`して変更を保存します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-136">Write the following to `/usr/sbin/policy-rc.d` and save your changes.</span></span>
  
   ``` BASH
   #!/bin/sh
   exit 101
   ```
  
2. <span data-ttu-id="47aa2-137">追加するアクセス許可を実行 `/usr/sbin/policy-rc.d`</span><span class="sxs-lookup"><span data-stu-id="47aa2-137">Add execute permissions to `/usr/sbin/policy-rc.d`</span></span>
   ``` BASH
   chmod +x /usr/sbin/policy-rc.d
   ```
  
3. <span data-ttu-id="47aa2-138">次のコマンドを実行します</span><span class="sxs-lookup"><span data-stu-id="47aa2-138">Run the following commands</span></span>
   ``` BASH
   dpkg-divert --local --rename --add /sbin/initctl
   ln -s /bin/true /sbin/initctl
   ```
  
### <a name="error-0x80040306-on-installation"></a><span data-ttu-id="47aa2-139">"エラー。0x80040306"のインストール</span><span class="sxs-lookup"><span data-stu-id="47aa2-139">"Error: 0x80040306" on installation</span></span>
<span data-ttu-id="47aa2-140">これは、従来のコンソールはサポートされていません、という事実とにいます。</span><span class="sxs-lookup"><span data-stu-id="47aa2-140">This has to do with the fact that we do not support legacy console.</span></span>
<span data-ttu-id="47aa2-141">従来のコンソールをオフにするには。</span><span class="sxs-lookup"><span data-stu-id="47aa2-141">To turn off legacy console:</span></span>

1. <span data-ttu-id="47aa2-142">Cmd.exe を開きます</span><span class="sxs-lookup"><span data-stu-id="47aa2-142">Open cmd.exe</span></span>
1. <span data-ttu-id="47aa2-143">タイトルを右クリックしてバー]-> [プロパティ]、[従来のコンソールを使用してのオフにします</span><span class="sxs-lookup"><span data-stu-id="47aa2-143">Right click title bar -> Properties -> Uncheck Use legacy console</span></span>
1. <span data-ttu-id="47aa2-144">[OK] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="47aa2-144">Click OK</span></span>

### <a name="error-0x80040154-after-windows-update"></a><span data-ttu-id="47aa2-145">"エラー。0x80040154"Windows の更新後</span><span class="sxs-lookup"><span data-stu-id="47aa2-145">"Error: 0x80040154" after Windows update</span></span>
<span data-ttu-id="47aa2-146">Linux の機能の Windows サブシステムが無効になっている Windows の更新中にします。</span><span class="sxs-lookup"><span data-stu-id="47aa2-146">The Windows Subsystem for Linux feature may be disabled during a Windows update.</span></span> <span data-ttu-id="47aa2-147">このような場合、Windows の機能が再度有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="47aa2-147">If this happens the Windows feature must be re-enabled.</span></span> <span data-ttu-id="47aa2-148">Linux が記載されているは、Windows サブシステムを有効にする手順、[インストール ガイド](https://msdn.microsoft.com/en-us/commandline/wsl/install_guide#enable-the-windows-subsystem-for-linux-feature-gui https://msdn.microsoft.com/en-us/commandline/wsl/install_guide#enable-the-windows-subsystem-for-linux-feature-gui)します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-148">Instructions for enabling the Windows Subsystem for Linux can be found in the [Installation Guide](https://msdn.microsoft.com/en-us/commandline/wsl/install_guide#enable-the-windows-subsystem-for-linux-feature-guihttps://msdn.microsoft.com/en-us/commandline/wsl/install_guide#enable-the-windows-subsystem-for-linux-feature-gui).</span></span>

### <a name="changing-the-display-language"></a><span data-ttu-id="47aa2-149">表示言語を変更します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-149">Changing the display language</span></span>
<span data-ttu-id="47aa2-150">WSL インストールは自動的に Windows インストールのロケールに一致するように Ubuntu ロケールを変更しようとします。</span><span class="sxs-lookup"><span data-stu-id="47aa2-150">WSL install will try to automatically change the Ubuntu locale to match the locale of your Windows install.</span></span>  <span data-ttu-id="47aa2-151">この動作したくない場合は、インストールが完了した後は、Ubuntu ロケールを変更するには、このコマンドを実行できます。</span><span class="sxs-lookup"><span data-stu-id="47aa2-151">If you do not want this behavior you can run this command to change the Ubuntu locale after install completes.</span></span>  <span data-ttu-id="47aa2-152">この変更を有効にする bash.exe を再起動する必要があります。</span><span class="sxs-lookup"><span data-stu-id="47aa2-152">You will have to relaunch bash.exe for this change to take effect.</span></span>

<span data-ttu-id="47aa2-153">次の例のロケールを EN-US に変更します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-153">The below example changes to locale to en-US:</span></span>
``` BASH
sudo update-locale LANG=en_US.UTF8
```

### <a name="installation-issues-after-windows-system-restore"></a><span data-ttu-id="47aa2-154">Windows システムの復元後のインストールの問題</span><span class="sxs-lookup"><span data-stu-id="47aa2-154">Installation issues after Windows system restore</span></span>
1.  <span data-ttu-id="47aa2-155">削除、`%windir%\System32\Tasks\Microsoft\Windows\Windows Subsystem for Linux`フォルダー。</span><span class="sxs-lookup"><span data-stu-id="47aa2-155">Delete the `%windir%\System32\Tasks\Microsoft\Windows\Windows Subsystem for Linux` folder.</span></span> <br/>
  <span data-ttu-id="47aa2-156">**注:そうしないと、省略可能な機能が完全にインストールされている場合と、操作します。**</span><span class="sxs-lookup"><span data-stu-id="47aa2-156">**Note: Do not do this if your optional feature is fully installed and working.**</span></span>
2.  <span data-ttu-id="47aa2-157">WSL の省略可能な機能を有効にする (まだ行っていない場合)</span><span class="sxs-lookup"><span data-stu-id="47aa2-157">Enable the WSL optional feature (if not already)</span></span>
3.  <span data-ttu-id="47aa2-158">再起動します</span><span class="sxs-lookup"><span data-stu-id="47aa2-158">Reboot</span></span>
4.  <span data-ttu-id="47aa2-159">lxrun/アンインストール/フル</span><span class="sxs-lookup"><span data-stu-id="47aa2-159">lxrun /uninstall /full</span></span>
5.  <span data-ttu-id="47aa2-160">Bash をインストールします。</span><span class="sxs-lookup"><span data-stu-id="47aa2-160">Install bash</span></span>

### <a name="no-internet-access-in-wsl"></a><span data-ttu-id="47aa2-161">WSL でインターネットにアクセスできません。</span><span class="sxs-lookup"><span data-stu-id="47aa2-161">No internet access in WSL</span></span>
<span data-ttu-id="47aa2-162">一部のユーザーには、WSL でインターネット アクセスをブロックする特定のファイアウォール アプリケーションで問題が報告します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-162">Some users have reported issues with specific firewall applications blocking internet access in WSL.</span></span>  <span data-ttu-id="47aa2-163">報告されるファイアウォールは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="47aa2-163">The firewalls reported are:</span></span>

1. <span data-ttu-id="47aa2-164">Kaspersky</span><span class="sxs-lookup"><span data-stu-id="47aa2-164">Kaspersky</span></span>
1. <span data-ttu-id="47aa2-165">AVG</span><span class="sxs-lookup"><span data-stu-id="47aa2-165">AVG</span></span>
1. <span data-ttu-id="47aa2-166">Avast</span><span class="sxs-lookup"><span data-stu-id="47aa2-166">Avast</span></span>

<span data-ttu-id="47aa2-167">場合によっては、ファイアウォールを無効にすることに対するアクセス許可します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-167">In some cases turning off the firewall allows for access.</span></span>  <span data-ttu-id="47aa2-168">アクセスをブロックするには、場合によっては、ファイアウォールをインストールしているだけで検索します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-168">In some cases simply having the firewall installed looks to block access.</span></span>

### <a name="permission-denied-error-when-using-ping"></a><span data-ttu-id="47aa2-169">Ping を使用する場合のアクセス許可の拒否エラー</span><span class="sxs-lookup"><span data-stu-id="47aa2-169">Permission Denied error when using ping</span></span>
#### <a name="anniversary-updatehttpsmsdnmicrosoftcomen-uscommandlinewslreleasenotesbuild-14388-to-windows-10-anniversary-update"></a>[<span data-ttu-id="47aa2-170">Anniversary Update</span><span class="sxs-lookup"><span data-stu-id="47aa2-170">Anniversary Update</span></span>](https://msdn.microsoft.com/en-us/commandline/wsl/release_notes#build-14388-to-windows-10-anniversary-update) 

<span data-ttu-id="47aa2-171">WSL で ping を実行するには、Windows で管理者特権が必要です。</span><span class="sxs-lookup"><span data-stu-id="47aa2-171">Administrator privileges in Windows are required to run ping in WSL.</span></span>  <span data-ttu-id="47aa2-172">Ping を実行するには、Ubuntu 上で管理者は、Windows で Bash を実行または bash.exe を管理者特権での CMD または PowerShell プロンプトから実行します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-172">To run ping, run Bash on Ubuntu on Windows as an administrator, or run bash.exe from a CMD/PowerShell prompt with administrator privileges.</span></span>

#### <a name="build-14926httpsmsdnmicrosoftcomen-uscommandlinewslreleasenotesbuild-14926"></a>[<span data-ttu-id="47aa2-173">ビルド 14926 +</span><span class="sxs-lookup"><span data-stu-id="47aa2-173">Build 14926+</span></span>](https://msdn.microsoft.com/en-us/commandline/wsl/release_notes#build-14926)
  <span data-ttu-id="47aa2-174">管理者特権が必要なくなりました。</span><span class="sxs-lookup"><span data-stu-id="47aa2-174">Administrator privileges no longer required.</span></span>

### <a name="bash-is-hung"></a><span data-ttu-id="47aa2-175">Bash が停止しています。</span><span class="sxs-lookup"><span data-stu-id="47aa2-175">Bash is hung</span></span>
<span data-ttu-id="47aa2-176">Bash での作業中に見つかった場合、bash がハングしている (またはデッドロック) の入力に応答していない、ご意見をお reporting メモリ ダンプを収集して問題を診断します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-176">If while working with bash, you find that bash is hung (or deadlocked) and not responding to inputs, help us diagnose the issue by collecting and reporting a memory dump.</span></span> <span data-ttu-id="47aa2-177">次の手順は、システムがクラッシュすることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="47aa2-177">Note that these steps will crash your system.</span></span> <span data-ttu-id="47aa2-178">これを実行する前に作業内容を保存するに慣れていない場合は、このチェック ボックスを行うにしないでください。</span><span class="sxs-lookup"><span data-stu-id="47aa2-178">Do not do this if you are not comfortable with that or save your work prior to doing this.</span></span>  <br/>
<span data-ttu-id="47aa2-179">メモリ ダンプを収集するには。</span><span class="sxs-lookup"><span data-stu-id="47aa2-179">To collect a memory dump:</span></span>
1. <span data-ttu-id="47aa2-180">メモリ ダンプの種類を「完全メモリ ダンプ」に変更します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-180">Change the memory dump type to "complete memory dump".</span></span> <span data-ttu-id="47aa2-181">ダンプの種類を変更するには、中に、現在の型のメモを実行します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-181">While changing the dump type, take a note of your current type.</span></span>
2. <span data-ttu-id="47aa2-182">使用して、[手順](https://blogs.technet.microsoft.com/askpfeplat/2015/04/05/how-to-force-a-diagnostic-memory-dump-when-a-computer-hangs/)クラッシュを構成するキーボード コントロールを使用します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-182">Use the [steps](https://blogs.technet.microsoft.com/askpfeplat/2015/04/05/how-to-force-a-diagnostic-memory-dump-when-a-computer-hangs/) to configure crash using keyboard control.</span></span>
3. <span data-ttu-id="47aa2-183">デッドロック、ハングを再現します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-183">Repro the hang or deadlock.</span></span>
4. <span data-ttu-id="47aa2-184">(2) からのキー シーケンスを使用して、システムがクラッシュします。</span><span class="sxs-lookup"><span data-stu-id="47aa2-184">Crash the system using the key sequence from (2).</span></span>
5. <span data-ttu-id="47aa2-185">システムがクラッシュし、メモリ ダンプを収集します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-185">The system will crash and collect the memory dump.</span></span>
6. <span data-ttu-id="47aa2-186">システムが再起動すると後のレポートに memory.dmpsecure@microsoft.comします。</span><span class="sxs-lookup"><span data-stu-id="47aa2-186">Once the system reboots, report the memory.dmp to secure@microsoft.com.</span></span> <span data-ttu-id="47aa2-187">ダンプ ファイルの既定の場所は、c: がシステム ドライブの場合は %SystemRoot%\memory.dmp または C:\Windows\memory.dmp します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-187">The default location of the dump file is %SystemRoot%\memory.dmp or C:\Windows\memory.dmp if C: is the system drive.</span></span> <span data-ttu-id="47aa2-188">電子メールの WSL または Bash のダンプがあることに注意してください Windows チームです。</span><span class="sxs-lookup"><span data-stu-id="47aa2-188">In the email, note that the dump is for the WSL or Bash on Windows team.</span></span>
7. <span data-ttu-id="47aa2-189">メモリ ダンプの種類を元の設定に復元します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-189">Restore the memory dump type to the original setting.</span></span>

### <a name="check-your-build-number"></a><span data-ttu-id="47aa2-190">ビルド番号を確認します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-190">Check your build number</span></span>

<span data-ttu-id="47aa2-191">お客様の PC のアーキテクチャと Windows のビルド番号を見つけるには開きます</span><span class="sxs-lookup"><span data-stu-id="47aa2-191">To find your PC's architecture and Windows build number, open</span></span>  
<span data-ttu-id="47aa2-192">**設定** > **システム** > **について**</span><span class="sxs-lookup"><span data-stu-id="47aa2-192">**Settings** > **System** > **About**</span></span>

<span data-ttu-id="47aa2-193">探して、 **OS ビルド**と**システム型**フィールド。</span><span class="sxs-lookup"><span data-stu-id="47aa2-193">Look for the **OS Build** and **System Type** fields.</span></span>  
    <span data-ttu-id="47aa2-194">![ビルドのスクリーン ショットとシステムの種類のフィールド](media/system.png)</span><span class="sxs-lookup"><span data-stu-id="47aa2-194">![Screenshot of Build and System Type fields](media/system.png)</span></span> 


<span data-ttu-id="47aa2-195">Windows Server のビルド番号を検索するには、PowerShell で、次を実行します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-195">To find your Windows Server build number, run the following in PowerShell:</span></span>  
``` PowerShell
systeminfo | Select-String "^OS Name","^OS Version"
```

### <a name="confirm-wsl-is-enabled"></a><span data-ttu-id="47aa2-196">WSL が有効になっていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-196">Confirm WSL is enabled</span></span>
<span data-ttu-id="47aa2-197">PowerShell で、次を実行して、Windows Subsystem for Linux が有効になっていることを確認できます。</span><span class="sxs-lookup"><span data-stu-id="47aa2-197">You can confirm that the Windows Subsystem for Linux is enabled by running the following in PowerShell:</span></span>  
``` PowerShell
PowerShell
Get-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
```

### <a name="openssh-server-connection-issues"></a><span data-ttu-id="47aa2-198">OpenSSH サーバー接続の問題</span><span class="sxs-lookup"><span data-stu-id="47aa2-198">OpenSSH-Server connection issues</span></span>
<span data-ttu-id="47aa2-199">SSH サーバーを接続しようとは、次のエラーで失敗しました。"接続を終了して 127.0.0.1 でポート 22"。</span><span class="sxs-lookup"><span data-stu-id="47aa2-199">Trying to connect your SSH server is failed with the following error: "Connection closed by 127.0.0.1 port 22".</span></span>
1. <span data-ttu-id="47aa2-200">OpenSSH サーバーで実行されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-200">Make sure your OpenSSH Server is running:</span></span>
   ``` BASH
   sudo service ssh status
   ```
   <span data-ttu-id="47aa2-201">このチュートリアルに従っています。 https://help.ubuntu.com/lts/serverguide/openssh-server.html.en</span><span class="sxs-lookup"><span data-stu-id="47aa2-201">and you've followed this tutorial: https://help.ubuntu.com/lts/serverguide/openssh-server.html.en</span></span>
2. <span data-ttu-id="47aa2-202">Sshd サービスを停止し、デバッグ モードで sshd を起動します。</span><span class="sxs-lookup"><span data-stu-id="47aa2-202">Stop the sshd service and start sshd in debug mode:</span></span>
   ``` BASH
   sudo service ssh stop
   sudo /usr/sbin/sshd -d
   ```
3. <span data-ttu-id="47aa2-203">スタートアップ ログを確認し、ログ メッセージが表示されない理由ホストキーが利用可能を: debug1: sshd バージョン OpenSSH_7.2、OpenSSL 1.0.2g 2016 年 3 月 1日 debug1: key_load_private: パスフレーズが正しくありませんが秘密キー debug1 を復号化に指定された: key_load_public:ファイルまたはディレクトリはホスト キーを読み込めません:/etc/ssh/ssh_host_rsa_key debug1: key_load_private:このようななしのファイルまたはディレクトリ debug1: key_load_public:ファイルまたはディレクトリはホスト キーを読み込めません:/etc/ssh/ssh_host_dsa_key debug1: key_load_private:このようななしのファイルまたはディレクトリ debug1: key_load_public:ファイルまたはディレクトリはホスト キーを読み込めません:/etc/ssh/ssh_host_ecdsa_key debug1: key_load_private:このようななしのファイルまたはディレクトリ debug1: key_load_public:ファイルまたはディレクトリはホスト キーを読み込めません:/etc/ssh/ssh_host_ed25519_key</span><span class="sxs-lookup"><span data-stu-id="47aa2-203">Check the startup logs and make sure HostKeys are available and you don't see log messages such as: debug1: sshd version OpenSSH_7.2, OpenSSL 1.0.2g  1 Mar 2016 debug1: key_load_private: incorrect passphrase supplied to decrypt private key debug1: key_load_public: No such file or directory Could not load host key: /etc/ssh/ssh_host_rsa_key debug1: key_load_private: No such file or directory debug1: key_load_public: No such file or directory Could not load host key: /etc/ssh/ssh_host_dsa_key debug1: key_load_private: No such file or directory debug1: key_load_public: No such file or directory Could not load host key: /etc/ssh/ssh_host_ecdsa_key debug1: key_load_private: No such file or directory debug1: key_load_public: No such file or directory Could not load host key: /etc/ssh/ssh_host_ed25519_key</span></span>

<span data-ttu-id="47aa2-204">このようなメッセージが表示され、キーは 不足している場合`/etc/ssh/`キーを再生成またはだけを消去して openssh サーバーをインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="47aa2-204">If you do see such messages and the keys are missing under `/etc/ssh/`, you will have to regenerate the keys or just purge&install openssh-server:</span></span>
```BASH
sudo apt-get purge openssh-server
sudo apt-get install openssh-server
```

