---
title: Windows Subsystem for Linux で Docker コンテナーの使用を開始する
description: Windows Subsystem for Linux で Docker コンテナーを設定する方法について説明します。
keywords: wsl、windows、windowssubsystem、windows 10、docker、コンテナー
ms.date: 08/28/2020
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: 5a1187336341d73f662b7e9f27b19df4fd0e1e73
ms.sourcegitcommit: b15b847b87d29a40de4a1517315949bce9c7a3d5
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/28/2020
ms.locfileid: "91413333"
---
# <a name="get-started-with-docker-remote-containers-on-wsl-2"></a><span data-ttu-id="8e3f8-104">WSL 2 で Docker リモートコンテナーを使ってみる</span><span class="sxs-lookup"><span data-stu-id="8e3f8-104">Get started with Docker remote containers on WSL 2</span></span>

<span data-ttu-id="8e3f8-105">このステップバイステップガイドでは、WSL 2 (windows Subsystem for Linux、バージョン 2) を使用して **Docker Desktop For Windows** をセットアップすることで、リモートコンテナーを使用した開発を始めることができます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-105">This step-by-step guide will help you get started developing with remote containers by **setting up Docker Desktop for Windows with WSL 2** (Windows Subsystem for Linux, version 2).</span></span>

<span data-ttu-id="8e3f8-106">Windows 用 Docker デスクトップは無料で利用でき、docker 化アプリのビルド、配布、実行のための開発環境を提供します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-106">Docker Desktop for Windows is available for free and provides a development environment for building, shipping, and running dockerized apps.</span></span> <span data-ttu-id="8e3f8-107">WSL 2 ベースのエンジンを有効にすることで、同じコンピューター上の Docker デスクトップで Linux と Windows の両方のコンテナーを実行できます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-107">By enabling the WSL 2 based engine, you can run both Linux and Windows containers in Docker Desktop on the same machine.</span></span>

## <a name="overview-of-docker-containers"></a><span data-ttu-id="8e3f8-108">Docker コンテナーの概要</span><span class="sxs-lookup"><span data-stu-id="8e3f8-108">Overview of Docker containers</span></span>

<span data-ttu-id="8e3f8-109">Docker は、コンテナーを使用してアプリケーションを作成、展開、および実行するために使用されるツールです。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-109">Docker is a tool used to create, deploy, and run applications using containers.</span></span> <span data-ttu-id="8e3f8-110">コンテナーを使用すると、開発者はアプリを必要なすべての部分 (ライブラリ、フレームワーク、依存関係など) とともにパッケージ化し、すべてを 1 つのパッケージとして出荷できます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-110">Containers enable developers to package an app with all of the parts it needs (libraries, frameworks, dependencies, etc) and ship it all out as one package.</span></span> <span data-ttu-id="8e3f8-111">コンテナーを使用すると、カスタマイズされた設定や、アプリを実行しているコンピューターに以前にインストールされていたライブラリが、アプリのコードの記述とテストに使用されたマシンと異なる可能性がある場合でも、アプリが同じように実行されることが保証されます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-111">Using a container ensures that the app will run the same regardless of any customized settings or previously installed libraries on the computer running it that could differ from the machine that was used to write and test the app's code.</span></span> <span data-ttu-id="8e3f8-112">これにより、開発者は、コードが実行されるシステムの心配をすることなく、コードの記述に集中できます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-112">This permits developers to focus on writing code without worrying about the system that code will be run on.</span></span>

<span data-ttu-id="8e3f8-113">Docker コンテナーは仮想マシンに似ていますが、仮想オペレーティング システム全体を作成するわけではありません。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-113">Docker containers are similar to virtual machines, but don't create an entire virtual operating system.</span></span> <span data-ttu-id="8e3f8-114">代わりに、Docker により、アプリが実行されているシステムと同じ Linux カーネルを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-114">Instead, Docker enables the app to use the same Linux kernel as the system that it's running on.</span></span> <span data-ttu-id="8e3f8-115">これにより、アプリ パッケージにはホスト コンピューター上にまだ存在しない部分だけが必要になるため、パッケージ サイズが減り、パフォーマンスを向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-115">This allows the app package to only require parts not already on the host computer, reducing the package size and improving performance.</span></span>

<span data-ttu-id="8e3f8-116">[Kubernetes](/azure/aks/) などのツールで Docker コンテナーを使用する、継続的な可用性が、コンテナーの人気のもう 1 つの理由です。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-116">Continuous availability, using Docker containers with tools like [Kubernetes](/azure/aks/), is another reason for the popularity of containers.</span></span> <span data-ttu-id="8e3f8-117">これにより、複数のバージョンのアプリ コンテナーを異なるタイミングで作成できます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-117">This enables multiple versions of your app container to be created at different times.</span></span> <span data-ttu-id="8e3f8-118">更新またはメンテナンスのためにシステム全体を停止するのではなく、各コンテナー (およびその特定のマイクロサービス) をすぐに置き換えることができます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-118">Rather than needing to take down an entire system for updates or maintenance, each container (and it's specific microservices) can be replaced on the fly.</span></span> <span data-ttu-id="8e3f8-119">すべての更新プログラムが含まれた新しいコンテナーを準備し、運用環境用にコンテナーを設定して、新しいコンテナーの準備ができたら、それをポイントするだけです。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-119">You can prepare a new container with all of your updates, set up the container for production, and just point to the new container once it's ready.</span></span> <span data-ttu-id="8e3f8-120">また、コンテナーを使用して異なるバージョンのアプリをアーカイブし、必要に応じて安全のフォールバックとしてそれらを実行し続けることもできます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-120">You can also archive different versions of your app using containers and keep them running as a safety fallback if needed.</span></span>

<span data-ttu-id="8e3f8-121">詳細については、Microsoft Learn の [Docker コンテナーの概要](/learn/modules/intro-to-docker-containers/) に関するページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-121">To learn more, checkout the [Introduction to Docker containers](/learn/modules/intro-to-docker-containers/) on Microsoft Learn.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="8e3f8-122">[前提条件]</span><span class="sxs-lookup"><span data-stu-id="8e3f8-122">Prerequisites</span></span>

- <span data-ttu-id="8e3f8-123">コンピューターで Windows 10 が実行されていること、バージョン2004、**ビルド 18362**以降[に更新さ](ms-settings:windowsupdate)れていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-123">Ensure your machine is running Windows 10, [updated to version 2004](ms-settings:windowsupdate), **Build 18362** or higher.</span></span>
- <span data-ttu-id="8e3f8-124">[WSL を有効にし、Linux ディストリビューションをインストールして、wsl 2 に更新](../install-win10.md)します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-124">[Enable WSL, install a Linux distribution, and update to WSL 2](../install-win10.md).</span></span>
- <span data-ttu-id="8e3f8-125">[Linux カーネル更新パッケージをダウンロードしてインストール](/windows/wsl/wsl2-kernel)します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-125">[Download and install the Linux kernel update package](/windows/wsl/wsl2-kernel).</span></span>
- <span data-ttu-id="8e3f8-126">[Visual Studio Code をインストール](https://code.visualstudio.com/download)します *(省略可能)*。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-126">[Install Visual Studio Code](https://code.visualstudio.com/download) *(optional)*.</span></span> <span data-ttu-id="8e3f8-127">これにより、リモート Docker コンテナー内でコードおよびデバッグを行い、Linux ディストリビューションに接続する機能など、最適なエクスペリエンスが提供されます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-127">This will provide the best experience, including the ability to code and debug inside a remote Docker container and connected to your Linux distribution.</span></span>
- <span data-ttu-id="8e3f8-128">[Windows ターミナルをインストール](/windows/terminal/get-started)します *(省略可能)*。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-128">[Install Windows Terminal](/windows/terminal/get-started) *(optional)*.</span></span> <span data-ttu-id="8e3f8-129">これにより、同じインターフェイス (Ubuntu、Debian、PowerShell、Azure CLI など) で複数のターミナルをカスタマイズして開く機能など、最適なエクスペリエンスが得られます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-129">This will provide the best experience, including the ability to customize and open multiple terminals in the same interface (including Ubuntu, Debian, PowerShell, Azure CLI, or whatever you prefer to use).</span></span>
- <span data-ttu-id="8e3f8-130">Docker [Hub で DOCKER ID にサインアップ](https://hub.docker.com/signup)します *(省略可能)*。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-130">[Sign up for a Docker ID at Docker Hub](https://hub.docker.com/signup) *(optional)*.</span></span>

> [!NOTE]
> <span data-ttu-id="8e3f8-131">Wsl は、WSL バージョン1または WSL 2 モードの両方でディストリビューションを実行できます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-131">WSL can run distributions in both WSL version 1 or WSL 2 mode.</span></span> <span data-ttu-id="8e3f8-132">これを確認するには、PowerShell を開き、「」と入力し `wsl -l -v` ます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-132">You can check this by opening PowerShell and entering: `wsl -l -v`.</span></span> <span data-ttu-id="8e3f8-133">次のように入力して、ディストリビューションが WSL 2 を使用するように設定されていることを確認し `wsl --set-version  <distro> 2` ます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-133">Ensure that the your distribution is set to use WSL 2 by entering: `wsl --set-version  <distro> 2`.</span></span> <span data-ttu-id="8e3f8-134">`<distro>`をディストリビューション名 (Ubuntu 18.04 など) に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-134">Replace `<distro>` with the distro name (e.g. Ubuntu 18.04).</span></span>
> 
> <span data-ttu-id="8e3f8-135">WSL バージョン1では、Windows と Linux の基本的な違いにより、Docker エンジンは WSL 内で直接実行できませんでした。そのため、Docker チームは、Hyper-v Vm と LinuxKit を使用して代替ソリューションを開発しました。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-135">In WSL version 1, due to fundamental differences between Windows and Linux, the Docker Engine couldn't run directly inside WSL, so the Docker team developed an alternative solution using Hyper-V VMs and LinuxKit.</span></span> <span data-ttu-id="8e3f8-136">ただし、WSL 2 は、完全なシステムコールの容量を持つ Linux カーネルで実行されるようになったため、Docker は WSL 2 で完全に実行できます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-136">However, since WSL 2 now runs on a Linux kernel with full system call capacity, Docker can fully run in WSL 2.</span></span> <span data-ttu-id="8e3f8-137">つまり、Linux コンテナーはエミュレーションなしでネイティブに実行できるため、Windows と Linux の両方のツール間でパフォーマンスと相互運用性が向上します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-137">This means that Linux containers can run natively without emulation, resulting in better performance and interoperability between your Windows and Linux tools.</span></span>

## <a name="install-docker-desktop"></a><span data-ttu-id="8e3f8-138">Docker Desktop のインストール</span><span class="sxs-lookup"><span data-stu-id="8e3f8-138">Install Docker Desktop</span></span>

<span data-ttu-id="8e3f8-139">Docker Desktop for Windows でサポートされている WSL 2 バックエンドでは、Linux ベースの開発環境で作業し、コードの編集とデバッグに Visual Studio Code を使用し、Windows の Microsoft Edge ブラウザーでコンテナーを実行できます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-139">With the WSL 2 backend supported in Docker Desktop for Windows, you can work in a Linux-based development environment and build Linux-based containers, while using Visual Studio Code for code editing and debugging, and running your container in the Microsoft Edge browser on Windows.</span></span>

<span data-ttu-id="8e3f8-140">Docker をインストールするには ( [WSL 2](../install-win10.md)を既にインストールした後):</span><span class="sxs-lookup"><span data-stu-id="8e3f8-140">To install Docker (after already [installing WSL 2](../install-win10.md)):</span></span>

1. <span data-ttu-id="8e3f8-141">[Docker Desktop](https://docs.docker.com/docker-for-windows/wsl/#download)をダウンロードし、インストール手順に従います。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-141">Download [Docker Desktop](https://docs.docker.com/docker-for-windows/wsl/#download) and follow the installation instructions.</span></span>

2. <span data-ttu-id="8e3f8-142">インストールが完了したら、Windows の [スタート] メニューから Docker Desktop を起動し、タスクバーの [非表示のアイコン] メニューから Docker アイコンを選択します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-142">Once installed, start Docker Desktop from the Windows Start menu, then select the Docker icon from the hidden icons menu of your taskbar.</span></span> <span data-ttu-id="8e3f8-143">アイコンを右クリックして [Docker コマンド] メニューを表示し、[設定] を選択します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-143">Right-click the icon to display the Docker commands menu and select "Settings".</span></span>
    <span data-ttu-id="8e3f8-144">![Docker デスクトップダッシュボードアイコン](../media/docker-starting.png)</span><span class="sxs-lookup"><span data-stu-id="8e3f8-144">![Docker Desktop dashboard icon](../media/docker-starting.png)</span></span>

3. <span data-ttu-id="8e3f8-145">[**設定**]  >  **[全般**] で [wsl 2 ベースのエンジンを使用する] がオンになっていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-145">Ensure that "Use the WSL 2 based engine" is checked in **Settings** > **General**.</span></span>
    <span data-ttu-id="8e3f8-146">![Docker Desktop の全般設定](../media/docker-running.png)</span><span class="sxs-lookup"><span data-stu-id="8e3f8-146">![Docker Desktop general settings](../media/docker-running.png)</span></span>

4. <span data-ttu-id="8e3f8-147">[**設定**] [リソース] [  >  **Resources**  >  **wsl 統合**] の順に移動して、Docker 統合を有効にするインストール済みの wsl 2 ディストリビューションを選択します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-147">Select from your installed WSL 2 distributions which you want to enable Docker integration on by going to: **Settings** > **Resources** > **WSL Integration**.</span></span>
    <span data-ttu-id="8e3f8-148">![Docker デスクトップリソースの設定](../media/docker-dashboard.png)</span><span class="sxs-lookup"><span data-stu-id="8e3f8-148">![Docker Desktop resource settings](../media/docker-dashboard.png)</span></span>

5. <span data-ttu-id="8e3f8-149">Docker がインストールされていることを確認するには、次のように入力して、WSL ディストリビューション (Ubuntu など) を開き、バージョンとビルド番号を表示します。 `docker --version`</span><span class="sxs-lookup"><span data-stu-id="8e3f8-149">To confirm that Docker has been installed, open a WSL distribution (e.g. Ubuntu) and display the version and build number by entering: `docker --version`</span></span>

6. <span data-ttu-id="8e3f8-150">次のものを使用して単純な組み込みの Docker イメージを実行することで、インストールが正しく機能することをテストします。 `docker run hello-world`</span><span class="sxs-lookup"><span data-stu-id="8e3f8-150">Test that your installation works correctly by running a simple built-in Docker image using: `docker run hello-world`</span></span>

> [!TIP]
> <span data-ttu-id="8e3f8-151">いくつかの便利な Docker コマンドを次に示します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-151">Here are a few helpful Docker commands to know:</span></span>
>
> - <span data-ttu-id="8e3f8-152">`docker` を入力して、Docker CLI で使用できるコマンドを一覧表示します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-152">List the commands available in the Docker CLI by entering: `docker`</span></span>
> - <span data-ttu-id="8e3f8-153">`docker <COMMAND> --help` を使用して、特定のコマンドの情報を一覧表示します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-153">List information for a specific command with: `docker <COMMAND> --help`</span></span>
> - <span data-ttu-id="8e3f8-154">`docker image ls --all` を使用して、お使いのマシン上の docker イメージを一覧表示します (この時点では hello world イメージのみ)。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-154">List the docker images on your machine (which is just the hello-world image at this point), with: `docker image ls --all`</span></span>
> - <span data-ttu-id="8e3f8-155">コンピューターのコンテナーを一覧表示 `docker container ls --all` する: または `docker ps -a` (-a show all フラグを指定しない場合は、実行中のコンテナーのみが表示されます)</span><span class="sxs-lookup"><span data-stu-id="8e3f8-155">List the containers on your machine, with: `docker container ls --all` or `docker ps -a` (without the -a show all flag, only running containers will be displayed)</span></span>
> - <span data-ttu-id="8e3f8-156">次のように、WSL 2 コンテキストで使用可能な統計とリソース (CPU & メモリ) を含む、Docker のインストールに関するシステム全体の情報を一覧表示します。 `docker info`</span><span class="sxs-lookup"><span data-stu-id="8e3f8-156">List system-wide information regarding the Docker installation, including statistics and resources (CPU & memory) available to you in the WSL 2 context, with: `docker info`</span></span>

## <a name="develop-in-remote-containers-using-vs-code"></a><span data-ttu-id="8e3f8-157">VS Code を使用したリモートコンテナーでの開発</span><span class="sxs-lookup"><span data-stu-id="8e3f8-157">Develop in remote containers using VS Code</span></span>

<span data-ttu-id="8e3f8-158">WSL 2 で Docker を使用してアプリの開発を開始するには、リモート WSL 拡張機能と Docker 拡張機能と共に VS Code を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-158">To get started developing apps using Docker with WSL 2, we recommend using VS Code, along with the Remote-WSL extension and Docker extension.</span></span>

- <span data-ttu-id="8e3f8-159">[VS Code Remote WSL 拡張機能をインストール](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl)します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-159">[Install the VS Code Remote-WSL extension](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl).</span></span> <span data-ttu-id="8e3f8-160">この拡張機能を使用すると、VS Code の WSL で実行されている Linux プロジェクトを開くことができます (パスの問題、バイナリの互換性、またはその他の OS 間の課題について心配する必要はありません)。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-160">This extension enables you to open your Linux project running on WSL in VS Code (no need to worry about pathing issues, binary compatibility, or other cross-OS challenges).</span></span>

- <span data-ttu-id="8e3f8-161">[VS Code リモートコンテナー拡張機能をインストール](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers)します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-161">[Install the VS code Remote-Containers extension](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers).</span></span> <span data-ttu-id="8e3f8-162">この拡張機能を使用すると、コンテナー内のプロジェクトフォルダーまたはリポジトリを開くことができます。これにより、Visual Studio Code の完全な機能セットを利用して、コンテナー内で開発作業を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-162">This extension enables you to open your project folder or repo inside of a container, taking advantage of Visual Studio Code's full feature set to do your development work within the container.</span></span>

- <span data-ttu-id="8e3f8-163">[VS Code Docker 拡張機能をインストール](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker)します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-163">[Install the VS Code Docker extension](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker).</span></span> <span data-ttu-id="8e3f8-164">この拡張機能により、VS Code の内部からコンテナー化アプリケーションをビルド、管理、およびデプロイする機能が追加されます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-164">This extension adds the functionality to build, manage, and deploy containerized applications from  inside VS Code.</span></span> <span data-ttu-id="8e3f8-165">(コンテナーを開発環境として実際に使用するには、リモートコンテナー拡張機能が必要です)。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-165">(You need the Remote-Container extension to actually use the container as your dev environment.)</span></span>

<span data-ttu-id="8e3f8-166">Docker を使用して、既存のアプリプロジェクトの開発コンテナーを作成しましょう。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-166">Let's use Docker to create a development container for an existing app project.</span></span>

1. <span data-ttu-id="8e3f8-167">この例では、Python 開発環境の [Django に関する Hello World](/windows/python/web-frameworks#hello-world-tutorial-for-django) 記事のソースコードを使用して、ドキュメントを設定します。独自のプロジェクトソースコードを使用する場合は、この手順を省略できます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-167">For this example, I'll use the source code from my [Hello World tutorial for Django](/windows/python/web-frameworks#hello-world-tutorial-for-django) in the Python development environment set up docs. You can skip this step if you prefer to use your own project source code.</span></span> <span data-ttu-id="8e3f8-168">GitHub から Django web アプリをダウンロードするには、WSL ターミナル (Ubuntu など) を開き、次のように入力します。 `git clone https://github.com/mattwojo/helloworld-django.git`</span><span class="sxs-lookup"><span data-stu-id="8e3f8-168">To download my HelloWorld-Django web app from GitHub, open a WSL terminal (Ubuntu for example) and enter: `git clone https://github.com/mattwojo/helloworld-django.git`</span></span>

    > [!NOTE]
    > <span data-ttu-id="8e3f8-169">コードは、ツールを使用しているのと同じファイルシステムに常に格納してください。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-169">Always store your code in the same file system that you're using tools in.</span></span> <span data-ttu-id="8e3f8-170">これにより、ファイルアクセスのパフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-170">This will result in faster file access performance.</span></span> <span data-ttu-id="8e3f8-171">この例では、Linux ディストリビューション (Ubuntu) を使用して、WSL ファイルシステムにプロジェクトファイルを格納し `\\wsl\` ます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-171">In this example, we are using a Linux distro (Ubuntu) and want to store our project files on the WSL file system `\\wsl\`.</span></span> <span data-ttu-id="8e3f8-172">Windows ファイルシステムにプロジェクトファイルを格納すると、WSL の Linux ツールを使用してこれらのファイルにアクセスするときに、処理が大幅に遅くなります。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-172">Storing project files on the Windows file system would significantly slow things down when using Linux tools in WSL to access those files.</span></span>

2. <span data-ttu-id="8e3f8-173">WSL ターミナルから、このプロジェクトのソースコードフォルダーにディレクトリを変更します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-173">From your WSL terminal, change directories to the source code folder for this project:</span></span>

    ```bash
    cd helloworld-django
    ```

3. <span data-ttu-id="8e3f8-174">次のように入力して、ローカルのリモート WSL 拡張サーバーで実行されている VS Code でプロジェクトを開きます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-174">Open the project in VS Code running on the local Remote-WSL extension server by entering:</span></span>

    ```bash
    code .
    ```

    <span data-ttu-id="8e3f8-175">VS Code インスタンスの左下隅にある緑色のリモートインジケーターを確認して、WSL Linux ディストリビューションに接続していることを確認します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-175">Confirm that you are connected to your WSL Linux distro by checking the green remote indicator in the bottom-left corner of your VS Code instance.</span></span>

    ![WSL リモートインジケーターの VS Code](../media/vscode-remote-indicator.png)

4. <span data-ttu-id="8e3f8-177">VS Code コマンドパレット (Ctrl + Shift + P) で、「 **リモートコンテナー: コンテナー内のフォルダーを開く...** 」と入力します。入力を開始したときにこのコマンドが表示されない場合は、上にリンクされているリモートコンテナー拡張機能がインストールされていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-177">From the VS Code command pallette (Ctrl + Shift + P), enter: **Remote-Containers: Open Folder in Container...** If this command doesn't display as you begin to type it, check to ensure that you've installed the Remote Container extension linked above.</span></span>

    ![リモートコンテナーコマンドの VS Code](../media/docker-extension.png)

5. <span data-ttu-id="8e3f8-179">コンテナー化するプロジェクトフォルダーを選択します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-179">Select the project folder that you wish to containerize.</span></span> <span data-ttu-id="8e3f8-180">ここでは、次のようになります。 `\\wsl\Ubuntu-20.04\home\mattwojo\repos\helloworld-django\`</span><span class="sxs-lookup"><span data-stu-id="8e3f8-180">In my case, this is `\\wsl\Ubuntu-20.04\home\mattwojo\repos\helloworld-django\`</span></span>

    ![リモートコンテナーフォルダーの VS Code](../media/docker-extension2.png)

6. <span data-ttu-id="8e3f8-182">プロジェクトフォルダー (リポジトリ) に DevContainer 構成がまだないため、コンテナー定義の一覧が表示されます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-182">A list of container definitions will appear, since there is no DevContainer configuration in the project folder (repo) yet.</span></span> <span data-ttu-id="8e3f8-183">表示されるコンテナー構成定義の一覧は、プロジェクトの種類に基づいてフィルター処理されます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-183">The list of container configuration definitions that appears is filtered based on your project type.</span></span> <span data-ttu-id="8e3f8-184">Django プロジェクトの場合は、Python 3 を選択します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-184">For my Django project, I'll select Python 3.</span></span>

    ![リモートコンテナー構成定義の VS Code](../media/docker-extension3.png)

7. <span data-ttu-id="8e3f8-186">VS Code の新しいインスタンスが開き、新しいイメージの構築が開始されます。ビルドが完了すると、コンテナーが開始されます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-186">A new instance of VS Code will open, begin building our new image, and once the build completed, will start our container.</span></span> <span data-ttu-id="8e3f8-187">新しい `.devcontainer` フォルダーが、およびファイル内のコンテナー構成情報と共に表示され `Dockerfile` `devcontainer.json` ます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-187">You will see that a new `.devcontainer` folder has appeared with container configuration information inside a `Dockerfile` and `devcontainer.json` file.</span></span>  

    ![VS Code devcontainer フォルダー](../media/docker-extension4.png)

8. <span data-ttu-id="8e3f8-189">プロジェクトが引き続き WSL とコンテナー内の両方に接続されていることを確認するには、VS Code 統合ターミナル (Ctrl + Shift + ~) を開きます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-189">To confirm that your project is still connected to both WSL and within a container, open the VS Code integrated terminal (Ctrl + Shift + ~).</span></span> <span data-ttu-id="8e3f8-190">次のように入力してオペレーティングシステムを確認します。 `uname` `python3 --version`</span><span class="sxs-lookup"><span data-stu-id="8e3f8-190">Check the operating system by entering: `uname` and the Python version with: `python3 --version`.</span></span> <span data-ttu-id="8e3f8-191">Uname が "Linux" として返されたので、WSL 2 エンジンにまだ接続していることを確認できます。 Python のバージョン番号は、WSL 分布にインストールされている Python のバージョンとは異なる可能性のあるコンテナーの構成に基づいています。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-191">You can see that the uname came back as "Linux", so you are still connected to the WSL 2 engine, and Python version number will be based on the container config that may differ from the Python version installed on your WSL distribution.</span></span>

9. <span data-ttu-id="8e3f8-192">Visual Studio Code を使用してコンテナー内でアプリを実行およびデバッグするには、最初に [ **実行** ] メニューを開きます (Ctrl + Shift + D キーを押すか、左端のメニューバーで [] タブを選択します)。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-192">To run and debug your app inside of the container using Visual Studio Code, first open the **Run** menu (Ctrl+Shift+D or select the tab on the far left menu bar).</span></span> <span data-ttu-id="8e3f8-193">次に、[ **実行とデバッグ** ] を選択してデバッグ構成を選択し、プロジェクトに最適な構成を選択します (この例では "Django" になります)。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-193">Then select **Run and Debug** to select a debug configuration and choose the configuration that best suites your project (in my example, this will be "Django").</span></span> <span data-ttu-id="8e3f8-194">これにより、 `launch.json` プロジェクトのフォルダーにファイルが作成され、 `.vscode` アプリを実行する手順が表示されます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-194">This will create a `launch.json` file in the `.vscode` folder of your project with instructions on how to run your app.</span></span>

    ![デバッグ構成を実行 VS Code には](../media/vscode-run-config.png)

10. <span data-ttu-id="8e3f8-196">VS Code 内から [デバッグ] [デバッグの開始]**を選択し**  >  **Start debugging**ます (または、 **F5**キーを押します)。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-196">From inside VS Code, select **Run** > **Start debugging** (or just press the **F5** key).</span></span> <span data-ttu-id="8e3f8-197">これにより VS Code 内のターミナルが開き、" http://127.0.0.1:8000/ コントロール-C を使用してサーバーを起動しています" という結果が表示されます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-197">This will open a terminal inside VS Code and you should see a result saying something like: "Starting development server at http://127.0.0.1:8000/ Quit the server with CONTROL-C."</span></span> <span data-ttu-id="8e3f8-198">Ctrl キーを押しながら、表示されるアドレスを選択して、既定の web ブラウザーでアプリを開き、そのコンテナー内で実行されているプロジェクトを確認します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-198">Hold down the Control key and select the address displayed to open your app in your default web browser and see your project running inside of its container.</span></span>

    ![Docker コンテナーを実行 VS Code](../media/vscode-running-in-container.png)

<span data-ttu-id="8e3f8-200">これで、WSL 2 バックエンドを使用している Docker Desktop を使用してリモート開発コンテナーが正常に構成されました。これは、VS Code を使用してコーディング、ビルド、実行、配置、またはデバッグを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-200">You have now successfully configured a remote development container using Docker Desktop, powered by the WSL 2 backend, that you can code in, build, run, deploy, or debug using VS Code!</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="8e3f8-201">トラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="8e3f8-201">Troubleshooting</span></span>

### <a name="wsl-docker-context-deprecated"></a><span data-ttu-id="8e3f8-202">WSL docker コンテキストの非推奨</span><span class="sxs-lookup"><span data-stu-id="8e3f8-202">WSL docker context deprecated</span></span>

<span data-ttu-id="8e3f8-203">WSL 用の Docker の早期技術プレビューを使用していた場合は、"wsl" という名前の Docker コンテキストを使用している可能性があります。これは現在非推奨とされ、使用されなくなりました。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-203">If you were using an  early Tech Preview of Docker for WSL, you may have a Docker context called "wsl" that is now deprecated and no longer used.</span></span> <span data-ttu-id="8e3f8-204">を確認するには、コマンドを使用 `docker context ls` します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-204">You can check with the command: `docker context ls`.</span></span> <span data-ttu-id="8e3f8-205">この "wsl" コンテキストを削除して、コマンドでエラーを回避できます。 `docker context rm wsl` Windows と WSL2 の両方に既定のコンテキストを使用します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-205">You can remove this "wsl" context to avoid errors with the command: `docker context rm wsl` as you want to use the default context for both Windows and WSL2.</span></span>

<span data-ttu-id="8e3f8-206">この非推奨の wsl コンテキストで発生する可能性のあるエラーには、次のものがあります。 `docker wsl open //./pipe/docker_wsl: The system cannot find the file specified.``error during connect: Get http://%2F%2F.%2Fpipe%2Fdocker_wsl/v1.40/images/json?all=1: open //./pipe/docker_wsl: The system cannot find the file specified.`</span><span class="sxs-lookup"><span data-stu-id="8e3f8-206">Possible errors you might encounter with this deprecated wsl context include: `docker wsl open //./pipe/docker_wsl: The system cannot find the file specified.` or `error during connect: Get http://%2F%2F.%2Fpipe%2Fdocker_wsl/v1.40/images/json?all=1: open //./pipe/docker_wsl: The system cannot find the file specified.`</span></span>

<span data-ttu-id="8e3f8-207">この問題の詳細については、 [windows 10 で Windows System For Linux (WSL2) で Docker をセットアップする方法に関する説明](https://www.hanselman.com/blog/HowToSetUpDockerWithinWindowsSystemForLinuxWSL2OnWindows10.aspx)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-207">For more on this issue, see [How to set up Docker within Windows System for Linux (WSL2) on Windows 10](https://www.hanselman.com/blog/HowToSetUpDockerWithinWindowsSystemForLinuxWSL2OnWindows10.aspx).</span></span>

### <a name="trouble-finding-docker-image-storage-folder"></a><span data-ttu-id="8e3f8-208">Docker イメージストレージフォルダーの検索に問題があります</span><span class="sxs-lookup"><span data-stu-id="8e3f8-208">Trouble finding docker image storage folder</span></span>

<span data-ttu-id="8e3f8-209">Docker では、データを格納するために2つのディストリビューションフォルダーが作成されます。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-209">Docker creates two distro folders to store data:</span></span>
- <span data-ttu-id="8e3f8-210">\\wsl $-dockerdesktop</span><span class="sxs-lookup"><span data-stu-id="8e3f8-210">\\wsl$\docker-desktop</span></span>
- <span data-ttu-id="8e3f8-211">\\wsl $/dockerdata</span><span class="sxs-lookup"><span data-stu-id="8e3f8-211">\\wsl$\docker-desktop-data</span></span>

<span data-ttu-id="8e3f8-212">これらのフォルダーを見つけるには、WSL Linux ディストリビューションを開き、「」と入力します。エクスプローラー `explorer.exe .` でフォルダーを表示するには、「」と入力します。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-212">You can find these folders by opening your WSL Linux distribution and entering: `explorer.exe .` to view the folder in Windows File Explorer.</span></span> <span data-ttu-id="8e3f8-213">「」と入力します。 `\\wsl\<distro name>\mnt\wsl` `<distro name>` は、実際の配布の名前 (ie) に置き換えます。これらのフォルダーを表示するには、Ubuntu-20.04) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-213">Enter: `\\wsl\<distro name>\mnt\wsl` replacing `<distro name>` with the name of your distribution (ie. Ubuntu-20.04) to see these folders.</span></span>

<span data-ttu-id="8e3f8-214">WSL で docker ストレージの場所を見つける方法の詳細については、 [wsl リポジトリ](https://github.com/microsoft/WSL/issues/4176) またはこの [stackoverlow の投稿](https://stackoverflow.com/questions/62380124/where-docker-image-is-stored-with-docker-desktop-for-windows)にあるこの問題を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-214">Find more on locating docker storage locations in WSL, see this [issue from the WSL repo](https://github.com/microsoft/WSL/issues/4176) or this [StackOverlow post](https://stackoverflow.com/questions/62380124/where-docker-image-is-stored-with-docker-desktop-for-windows).</span></span>

<span data-ttu-id="8e3f8-215">WSL での一般的なトラブルシューティングの問題の詳細については、 [トラブルシューティング](../troubleshooting.md) に関するドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="8e3f8-215">For more help with general troubleshooting issues in WSL, see the [Troubleshooting](../troubleshooting.md) doc.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="8e3f8-216">その他のリソース</span><span class="sxs-lookup"><span data-stu-id="8e3f8-216">Additional resources</span></span>

- [<span data-ttu-id="8e3f8-217">Docker ドキュメント: WSL 2 を使用した Docker デスクトップのベストプラクティス</span><span class="sxs-lookup"><span data-stu-id="8e3f8-217">Docker docs: Best practices for Docker Desktop with WSL 2</span></span>](https://docs.docker.com/docker-for-windows/wsl/#best-practices)
- [<span data-ttu-id="8e3f8-218">Windows 用 Docker デスクトップに関するフィードバック: ファイルの発行</span><span class="sxs-lookup"><span data-stu-id="8e3f8-218">Feedback for Docker Desktop for Windows: File an issue</span></span>](https://github.com/docker/for-win/issues)
- [<span data-ttu-id="8e3f8-219">VS Code のブログ: 開発環境の選択に関するガイドライン</span><span class="sxs-lookup"><span data-stu-id="8e3f8-219">VS Code Blog: Guidelines for choosing a development environment</span></span>](https://code.visualstudio.com/docs/containers/choosing-dev-environment#_guidelines-for-choosing-a-development-environment)
- [<span data-ttu-id="8e3f8-220">VS Code ブログ: WSL 2 での Docker の使用</span><span class="sxs-lookup"><span data-stu-id="8e3f8-220">VS Code Blog: Using Docker in WSL 2</span></span>](https://code.visualstudio.com/blogs/2020/03/02/docker-in-wsl2)
- [<span data-ttu-id="8e3f8-221">VS Code ブログ: WSL 2 でのリモートコンテナーの使用</span><span class="sxs-lookup"><span data-stu-id="8e3f8-221">VS Code Blog: Using Remote Containers in WSL 2</span></span>](https://code.visualstudio.com/blogs/2020/07/01/containers-wsl)
- [<span data-ttu-id="8e3f8-222">前の selminutes ポッドキャスト: Simon の開発者にとって Docker の気持ちを作る</span><span class="sxs-lookup"><span data-stu-id="8e3f8-222">Hanselminutes Podcast: Making Docker lovely for Developers with Simon Ferquel</span></span>](https://hanselminutes.com/736/making-docker-lovely-for-developers-with-simon-ferquel)